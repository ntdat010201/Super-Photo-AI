# Git Integration cho TSDDR 2.0 Workflow

> **üîÑ Gi·∫£i ph√°p Git Branching Strategy ƒë·ªÉ tr√°nh review l·∫∑p l·∫°i**  
> T√≠ch h·ª£p Git workflow v·ªõi TSDDR 2.0 ƒë·ªÉ t·ªëi ∆∞u code review process

## üéØ V·∫•n ƒê·ªÅ C·∫ßn Gi·∫£i Quy·∫øt

**Th√°ch th·ª©c hi·ªán t·∫°i:**
- Review code l·∫∑p l·∫°i khi l√†m vi·ªác v·ªõi module/t√≠nh nƒÉng l·ªõn
- Kh√≥ theo d√µi ti·∫øn ƒë·ªô c·ªßa t·ª´ng giai ƒëo·∫°n trong Test Spec workflow
- Kh√¥ng c√≥ c√°ch t√°ch bi·ªát code c·ªßa c√°c giai ƒëo·∫°n kh√°c nhau
- Reviewer ph·∫£i xem l·∫°i to√†n b·ªô code m·ªói l·∫ßn c√≥ thay ƒë·ªïi

**M·ª•c ti√™u:**
- T·∫°o Git branching strategy ph√π h·ª£p v·ªõi 6 giai ƒëo·∫°n c·ªßa TSDDR 2.0 workflow
- Cho ph√©p review t·ª´ng giai ƒëo·∫°n m·ªôt c√°ch ƒë·ªôc l·∫≠p
- Tr√°nh review l·∫∑p l·∫°i v√† t·ªëi ∆∞u th·ªùi gian review
- Duy tr√¨ t√≠nh truy xu·∫•t v√† rollback capability

## üå≥ Git Branching Strategy cho TSDDR 2.0 Workflow

### C·∫•u Tr√∫c Branch Hierarchy

```
main
‚îú‚îÄ‚îÄ feature/[feature-name]                    # Main feature branch
‚îÇ   ‚îú‚îÄ‚îÄ feature/[feature-name]/requirements   # Phase 1: Requirements
‚îÇ   ‚îú‚îÄ‚îÄ feature/[feature-name]/design         # Phase 2: Design  
‚îÇ   ‚îú‚îÄ‚îÄ feature/[feature-name]/tasks          # Phase 3: Tasks
‚îÇ   ‚îú‚îÄ‚îÄ feature/[feature-name]/execution      # Phase 4: Execution
‚îÇ   ‚îú‚îÄ‚îÄ feature/[feature-name]/test           # Phase 5: Test (NEW)
‚îÇ   ‚îî‚îÄ‚îÄ feature/[feature-name]/review         # Phase 6: Review (NEW)
‚îî‚îÄ‚îÄ hotfix/[issue-name]                       # Emergency fixes
```

### Branch Naming Convention

**Format:** `[type]/[feature-name]/[phase]`

**Examples:**
- `feature/user-authentication/requirements`
- `feature/payment-system/design`
- `feature/ai-chat-bot/execution`
- `feature/notification-service/test`
- `feature/dashboard-ui/review`

## üîÑ Workflow Integration v·ªõi Git

### Phase 1: Requirements Branch
```bash
# T·∫°o feature branch ch√≠nh
git checkout -b feature/user-authentication

# T·∫°o requirements sub-branch
git checkout -b feature/user-authentication/requirements

# Commit requirements documents
git add requirements.md user-stories.md
git commit -m "feat(requirements): add user authentication requirements"

# T·∫°o Pull Request cho Requirements Review
gh pr create --title "[REQUIREMENTS] User Authentication" \
             --body "Requirements phase for user authentication feature"
```

### Phase 2: Design Branch
```bash
# Merge requirements v√†o feature branch
git checkout feature/user-authentication
git merge feature/user-authentication/requirements

# T·∫°o design sub-branch
git checkout -b feature/user-authentication/design

# Commit design documents
git add design.md architecture-diagram.png
git commit -m "feat(design): add authentication system design"

# T·∫°o Pull Request cho Design Review
gh pr create --title "[DESIGN] User Authentication" \
             --body "Design phase - includes architecture and technical specs"
```

### Phase 3-6: T∆∞∆°ng t·ª± cho c√°c giai ƒëo·∫°n kh√°c

## üìã Review Process cho t·ª´ng Phase

### 1. Requirements Review
**Branch:** `feature/[name]/requirements`
**Review Focus:**
- Business requirements completeness
- User stories clarity
- Acceptance criteria definition
- Stakeholder sign-off

**Review Checklist:**
- [ ] Requirements document complete
- [ ] User stories follow INVEST criteria
- [ ] Acceptance criteria measurable
- [ ] Business stakeholder approval

### 2. Design Review
**Branch:** `feature/[name]/design`
**Review Focus:**
- Technical architecture soundness
- Design patterns appropriateness
- Scalability considerations
- Integration points

**Review Checklist:**
- [ ] Architecture diagram clear
- [ ] Design patterns documented
- [ ] Database schema defined
- [ ] API contracts specified
- [ ] Security considerations addressed

### 3. Tasks Review
**Branch:** `feature/[name]/tasks`
**Review Focus:**
- Task breakdown completeness
- Dependencies identification
- Estimation accuracy
- Resource allocation

### 4. Execution Review
**Branch:** `feature/[name]/execution`
**Review Focus:**
- Code implementation quality
- Coding standards compliance
- Performance considerations
- Error handling

### 5. Test Review (NEW)
**Branch:** `feature/[name]/test`
**Review Focus:**
- Test coverage adequacy
- Test case quality
- AI-powered test generation
- Error pattern detection

### 6. Final Review (NEW)
**Branch:** `feature/[name]/review`
**Review Focus:**
- Multi-AI code review results
- Vibe coding compliance
- iOS-specific checklist
- Performance optimization

## ü§ñ Automation Tools

### GitHub Actions Workflow
```yaml
name: Test Spec Driven Review

on:
  pull_request:
    branches:
      - 'feature/*/requirements'
      - 'feature/*/design'
      - 'feature/*/tasks'
      - 'feature/*/execution'
      - 'feature/*/test'
      - 'feature/*/review'

jobs:
  phase-review:
    runs-on: ubuntu-latest
    steps:
      - name: Determine Phase
        id: phase
        run: |
          BRANCH_NAME=${GITHUB_HEAD_REF}
          PHASE=$(echo $BRANCH_NAME | cut -d'/' -f3)
          echo "phase=$PHASE" >> $GITHUB_OUTPUT
      
      - name: Requirements Review
        if: steps.phase.outputs.phase == 'requirements'
        run: |
          # Validate requirements documents
          # Check user stories format
          # Verify acceptance criteria
      
      - name: Design Review
        if: steps.phase.outputs.phase == 'design'
        run: |
          # Validate architecture diagrams
          # Check design patterns
          # Verify API contracts
      
      - name: AI-Powered Test Review
        if: steps.phase.outputs.phase == 'test'
        run: |
          # Run AI test analysis
          # Check test coverage
          # Validate test patterns
      
      - name: Multi-AI Code Review
        if: steps.phase.outputs.phase == 'review'
        run: |
          # Claude 4 review
          # Gemini review
          # o3 review
          # Consolidate results
```

### Git Hooks
```bash
#!/bin/sh
# pre-commit hook for Test Spec workflow

BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)
PHASE=$(echo $BRANCH_NAME | cut -d'/' -f3)

case $PHASE in
  "requirements")
    # Validate requirements documents exist
    if [ ! -f "requirements.md" ]; then
      echo "Error: requirements.md is required for requirements phase"
      exit 1
    fi
    ;;
  "design")
    # Validate design documents
    if [ ! -f "design.md" ]; then
      echo "Error: design.md is required for design phase"
      exit 1
    fi
    ;;
  "test")
    # Run tests before commit
    npm test || exit 1
    ;;
esac
```

## üìä Benefits c·ªßa Git Integration

### 1. Tr√°nh Review L·∫∑p L·∫°i
- **Tr∆∞·ªõc:** Review to√†n b·ªô code m·ªói l·∫ßn thay ƒë·ªïi
- **Sau:** Review ch·ªâ nh·ªØng thay ƒë·ªïi trong phase hi·ªán t·∫°i
- **Ti·∫øt ki·ªám:** 60-70% th·ªùi gian review

### 2. Parallel Development
- Multiple developers c√≥ th·ªÉ l√†m vi·ªác tr√™n c√°c phase kh√°c nhau
- Kh√¥ng block nhau trong qu√° tr√¨nh development
- TƒÉng t·ªëc ƒë·ªô delivery

### 3. Better Traceability
- M·ªói phase c√≥ history ri√™ng bi·ªát
- D·ªÖ d√†ng rollback v·ªÅ phase tr∆∞·ªõc ƒë√≥
- Clear audit trail cho compliance

### 4. Quality Gates
- M·ªói phase ph·∫£i pass review tr∆∞·ªõc khi merge
- Automated checks cho t·ª´ng phase
- Prevent low-quality code t·ª´ vi·ªác merge s·ªõm

## üõ†Ô∏è Implementation Guide

### Step 1: Setup Branch Protection Rules
```bash
# Protect main branch
gh api repos/:owner/:repo/branches/main/protection \
  --method PUT \
  --field required_status_checks='{"strict":true,"contexts":["test-spec-review"]}' \
  --field enforce_admins=true \
  --field required_pull_request_reviews='{"required_approving_review_count":2}'
```

### Step 2: Create Branch Templates
```bash
#!/bin/bash
# create-feature-branch.sh

FEATURE_NAME=$1
if [ -z "$FEATURE_NAME" ]; then
  echo "Usage: ./create-feature-branch.sh <feature-name>"
  exit 1
fi

# Create main feature branch
git checkout -b feature/$FEATURE_NAME

# Create phase branches
for PHASE in requirements design tasks execution test review; do
  git checkout -b feature/$FEATURE_NAME/$PHASE
  git checkout feature/$FEATURE_NAME
done

echo "Created feature branches for: $FEATURE_NAME"
echo "Available phases: requirements, design, tasks, execution, test, review"
```

### Step 3: Setup Review Templates
```markdown
<!-- .github/pull_request_template.md -->
## Test Spec Phase Review

**Phase:** [Requirements/Design/Tasks/Execution/Test/Review]
**Feature:** [Feature Name]

### Phase-Specific Checklist

#### Requirements Phase
- [ ] Requirements document complete
- [ ] User stories defined
- [ ] Acceptance criteria clear
- [ ] Stakeholder approval obtained

#### Design Phase
- [ ] Architecture diagram provided
- [ ] Technical specifications complete
- [ ] API contracts defined
- [ ] Security considerations addressed

#### Test Phase
- [ ] Test coverage meets requirements (>85%)
- [ ] AI-generated tests reviewed
- [ ] Error patterns identified
- [ ] Performance tests included

#### Review Phase
- [ ] Multi-AI review completed
- [ ] Vibe coding standards met
- [ ] iOS-specific checklist passed
- [ ] Performance optimized

### Review Notes
[Add your review comments here]
```

## üöÄ Migration Plan

### Phase 1: Setup (Week 1)
- [ ] Create branch protection rules
- [ ] Setup GitHub Actions workflows
- [ ] Create branch templates
- [ ] Train team on new workflow

### Phase 2: Pilot (Week 2-3)
- [ ] Test with 1-2 small features
- [ ] Gather feedback from team
- [ ] Refine processes based on feedback
- [ ] Document lessons learned

### Phase 3: Full Rollout (Week 4+)
- [ ] Apply to all new features
- [ ] Migrate existing features gradually
- [ ] Monitor and optimize
- [ ] Continuous improvement

## üìà Success Metrics

### Efficiency Metrics
- **Review Time Reduction:** Target 60% reduction
- **Merge Conflicts:** Target 80% reduction
- **Rework Rate:** Target 50% reduction

### Quality Metrics
- **Bug Detection Rate:** Increase by 40%
- **Code Coverage:** Maintain >85%
- **Review Coverage:** 100% of phases reviewed

### Team Satisfaction
- **Developer Experience:** Survey score >4.5/5
- **Review Quality:** Survey score >4.5/5
- **Process Clarity:** Survey score >4.5/5

---

**üéØ K·∫øt lu·∫≠n:** Git integration v·ªõi TSDDR 2.0 Workflow s·∫Ω gi·∫£i quy·∫øt tri·ªát ƒë·ªÉ v·∫•n ƒë·ªÅ review l·∫∑p l·∫°i, tƒÉng hi·ªáu qu·∫£ team v√† ch·∫•t l∆∞·ª£ng code. ƒê√¢y l√† gi·∫£i ph√°p scalable v√† sustainable cho long-term development!

**üìû Next Steps:** Th·∫£o lu·∫≠n v·ªõi team v·ªÅ implementation timeline v√† resource allocation ƒë·ªÉ b·∫Øt ƒë·∫ßu migration plan.